!function(t,l){"use strict";var n="DOMContentLoaded",p={},d={},h={},g={},u=[],s=!1,y={_function:function(t){return"function"==typeof t},_string:function(t){return"string"==typeof t||t instanceof String},_number:function(t){return"number"==typeof t&&isFinite(t)},_array:function(t){return t&&"object"==typeof t&&t.constructor===Array},_object:function(t){return t&&"object"==typeof t},_null:function(t){return null===t},_undefined:function(t){return void 0===t},_bool:function(t){return"boolean"==typeof t},set:function(t){return!y._undefined(t)&&!y._null(t)},http:function(){return"http"===t}};function e(){var t;for(y.http()&&document.removeEventListener(n,e,!1),s=!0,u.sort(function(t,n){return t[0]==n[0]?0:t[0]>n[0]?1:-1});t=u.shift();)t[1].call(p)}y.http()?document.addEventListener(n,e,!1):e(),Object.assign=void 0!==Object.assign?Object.assign:function(){var t=arguments[0]||null;if(!t)throw"Invalid target";for(var n=1;n<arguments.length;n++)for(var e in arguments[n])t[e]=arguments[n][e];return t};var f=function(n,t){var e=this,r=[t];Object.assign(e,{use:function(t){return r.push("use:"+t),e},is:function(t){return r.push("is:"+t),e},define:function(t){if(!y._object(t)&&!y._function(t))throw"Invalid definition type";r.push(t),n.apply(p,r)}})},v={onReadyStack:[],bindReady:function(t){v.onReadyStack.push(t)},unbindReady:function(n){v.onReadyStack=v.onReadyStack.filter(function(t){return t!==n})},onReadyCall:function(n){v.onReadyStack.map(function(t){t(n)&&v.unbindReady(t)})},onReadyCheck:function(t){v.exists(t)&&v.onReadyCall(t)},put:function(t,n,e,r){if(!y._function(e)&&!y._object(e))throw"Invalid namespace object: "+t;for(var i,o,a,u,s=t.split("."),f=s.pop(),c=p;i=s.shift();)y.set(c[i])||(c[i]={}),c=c[i];if(y.set(c[f]))throw"Item already exists in namespace: "+f;if(n&&y.set(l[n]))throw"Item already exists in global namespace: "+n;o=t,a=c[f]=e,u=void 0===r||r,!y.http()&&u&&(g[o].exports=a),n&&0!=n.length&&(l[n]=c[f]),v.onReadyCall(t)},get:function(t,n){for(var e,r=(t=t.split(".")).pop(),i=n||p;e=t.shift();){if(!y.set(i[e]))return null;i=i[e]}return i[r]||null},exists:function(t){return!!v.get(t)},load:function(t,n){if(v.exists(t))return n.call(p);!function(t,n,e){if(h[t])return n();h[t]=!0;var r,i,o=t.split("."),a=[o.pop()+".js"];do{if(i=o.join("."),r&&a.unshift(r),y.set(d[i])){var u=d[i]+"/"+a.join("/");break}}while(r=o.pop());if(!u&&y.http())return e();if(y.http()){var s=document.createElement("script");s.type="text/javascript",s.src=u+"?"+Math.random(),s.addEventListener("load",n),s.addEventListener("error",e),document.getElementsByTagName("head")[0].appendChild(s)}else{if(u)require(u);else{var f=t.split("."),c=require(f[0]),l=1<f.length?c[f[1]]:c;v.put(t,null,l,!1)}n()}}(t,function(){return n.call(p)},function(){throw"Invalid path for autoloading object: "+t})}},c={listen:function(t){document.removeEventListener(n,e,!1),n=t,document.addEventListener(n,e,!1)},autoload:function(){return c._autoload.apply(p,arguments)},namespace:function(){return c._namespace.apply(p,arguments)},use:function(){for(var t=[!1],n=0;n<arguments.length;n++)t.push(arguments[n]);return c._use.apply(p,t)},is:function(){return c._is.apply(p,arguments)},_autoload:function(){if(arguments.length<1)throw"To few arguments in autoload method";if(y._string(arguments[0]))return d[arguments[0]]||null;if(!y._object(arguments[0]))throw"Invalid argument type";return Object.assign(d,arguments[0])},_namespace:function(){if(arguments.length<1)throw"To few arguments in namespace method";var t,n,r=arguments[0].split(":"),i=1<r.length&&r[1];if(r=r[0],!y._string(r))throw"Invalid name type (string expected)";if(t=r,n=function(){var t,n=Error.prepareStackTrace;try{var e,r=new Error;for(Error.prepareStackTrace=function(t,n){return n},e=r.stack.shift().getFileName();r.stack.length&&e===(t=r.stack.shift().getFileName()););}catch(t){}return Error.prepareStackTrace=n,t}(),y.http()||(g[t]=require.cache[n]),1===arguments.length)return new f(c._namespace,r);var o=arguments[arguments.length-1],e=[!0];if(!y._function(o)&&!y._object(o))throw"Invalid factory type (function|object expected)";for(var a=1;a<arguments.length-1;a++)if(y._string(arguments[a])){if(arguments[a]==r)continue;e.push(arguments[a])}else{if(!y._array(arguments[a]))throw"Invalid argument type (string or array expected)";e=e.concat(arguments[a])}e.push(function(){for(var t={is:[],use:[]},n=0;n<arguments.length;n++)t[arguments[n][0]].push(arguments[n][1]);var e=null;if(t.use.length){if(!y._function(o))throw"Invalid factory type (loaded not allowed for object factory)";e=o.apply(p,t.use)}else e=o;t.is.length&&(y._function(e)?(t.is.unshift(e.prototype),e.prototype=c.extend.apply(p,t.is)):(t.is.unshift({}),t.is.push(e),e=c.extend.apply(p,t.is))),v.put(r,i,e)}),c._use.apply(p,e)},_use:function(t){if(arguments.length<2)throw"To few arguments in use method";var n=arguments[arguments.length-1],e=[];if(!y._function(n)){for(r=1;r<arguments.length;r++){if(!y._string(arguments[r]))throw"Invalid argument type in use method (string expected)";e.push("use:"+arguments[r])}return e}for(var r=1;r<arguments.length-1;r++){if(!y._string(arguments[r]))throw"Invalid argument type in use method (string expected)";var i=-1!==arguments[r].indexOf(":")?"":"use:";e.push(i+arguments[r])}if(!y._function(n))throw"Factory is not a function";v.bindReady(c.ready(e,c.build(e,n,t)));var o=function(){if(0==e.length)return n.call(p);e.map(function(t){t=(t=t.split(":")[1]).split("#")[0],v.load(t,function(){v.onReadyCheck(t)})})};if(s)o();else{var a=t?0+e.length:1e5;u.push([a,o])}},_is:function(){if(arguments.length<1)throw"To few arguments in extends method";for(var t=[],n=0;n<arguments.length;n++){if(!y._string(arguments[n]))throw"Invalid argument type in extends method";t.push("is:"+arguments[n])}return t},ready:function(t,e){var r=t.slice(0);return function(n){return 0===r.length||0===(r=r.filter(function(t){return n!==t.split(":")[1].split("#")[0]})).length&&(e.call(p),!0)}},build:function(t,n,a){return function(){var i,o=[];t.map(function(t){var n=t.split(":")[0],e=t.split(":")[1],r=e.split("#")[1]||null;if(e=e.split("#")[0],!(i=v.get(e)))throw"Object not found for: "+e+". Namespace missing or invalid?";if(r&&y._function(i))throw"Unable to use property for function factory";if(r&&!(i=v.get(r,i)))throw"Proeprty "+r+" not found in "+e;o.push(a?[n,i]:i)}),n.apply(p,o)}},extend:function(t){t=t||{};for(var n=1;n<arguments.length;n++){var e=arguments[n];if(e)for(var r in e)e.hasOwnProperty(r)&&(y._object(e[r])?t[r]=c.extend(t[r],e[r]):t[r]=e[r])}return t}};Object.assign(p,{$get:v.get,$exists:v.exists}),Object.assign(l,{$$:p,listen:c.listen,autoload:c.autoload,namespace:c.namespace,use:c.use,is:c.is})}("undefined"!=typeof window?"http":"node","undefined"!=typeof window?window:global);